<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
  <h2>ğŸµ ìŒì•… ê²€ìƒ‰ (iTunes API)</h2>

  <input id="search" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥ (ì˜ˆ: BTS)">
  <button id="btn">ê²€ìƒ‰</button>
  <ul id="result"></ul>
 </body>
 <script>
    let btn = document.querySelector("#btn")
    let search = document.querySelector("#search").value;
    let list = document.querySelector("#result")
    // ë²„íŠ¼ì— í´ë¦­ ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ë•Œ
    btn.addEventListener("click", () => {
        // input íƒœê·¸ì— ì íŒ ë‚´ìš©ì„ ê°€ì ¸ì˜¨ë‹¤
        let keyword = document.querySelector("#search").value;
        // ì•„ì´íŠ ì¦ˆ apiì— í‚¤ì›Œë“œì— ëŒ€í•œ ë‚´ìš©ì¡°íšŒë¥¼ ìš”ì²­í•œë‹¤
        fetch(`https://itunes.apple.com/search?term=${keyword}&entity=song&limit=5`)
            .then(res => {
                if(!res.ok){
                    throw new Error("ê²€ìƒ‰ ì‹¤íŒ¨");
                }
                return res.json();
            })
            .then(data => {
                // map() : ì›ë³¼ ë°°ì—´ì„ ë³€í™˜í•´ì„œ ìƒˆë¡œìš´ ë°°ì—´ì„ ë§Œë“œëŠ” ë©”ì„œë“œ

                // ê°€ì ¸ì˜¨ ë°ì´í„°ê°€ ìˆë‹¤ë©´ mapì„ í†µí•´ì„œ ë…¸ë˜ - ê°€ìˆ˜ í˜•ì‹ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ ë°°ì—´ë¡œ ì €ì¥
                // join()ì„ í†µí•´ì„œ í•˜ë‚˜ì˜ ë¬¸ìì—´ë¡œ ë§Œë“ ë‹¤
                const arr = data.results.length ? 
                    data.results.map(item => 
                        `<li>${item.trackName} - ${item.artistName}</li>`
                    ).join("") : "<li>ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ</li>"
                    // ì–»ì–´ì˜¨ ê²°ê³¼ë¥¼ <ul>ì— ë„£ëŠ”ë‹¤
                    list.innerHTML = arr;
            })
            .catch(err =>{
                console.error("ì—ëŸ¬",err);
                alert("ê²€ìƒ‰ ì¤‘ ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.")
            });
    })
 </script>
</html>